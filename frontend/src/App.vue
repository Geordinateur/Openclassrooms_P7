<template>
  <div id="app">
    <div id="nav">
      <NavBar />
    </div>
    <div class="container mt-4 mb-4">
      <transition name="fade" mode="out-in">
      <router-view/>
      </transition>
    </div>
  </div>
</template>

<style>

</style>

<script>
import NavBar from './components/NavBar.vue'
import axios from 'axios'
import Vue from 'vue'
import moment from 'moment'

axios.defaults.baseURL = 'http://localhost:3000/api/';
axios.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.userToken + ' ' + localStorage.userId; 
axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';


export default {
  name: 'App',
  components: {
    NavBar,
  },
  computed: {
  },
  data() {
    return {
      showLoader: false
    }
  },
  mounted() {
    this.myToken = localStorage.userToken;
    axios
      .get('user/' + localStorage.userId)
      .then(res  => this.$store.commit('AUTHENTIFICATION', res.data.user))
      .catch(err => console.log('error: ' + err))

  },
  watch: {
    myToken(newToken) {
      localStorage.userToken = newToken;
    },
  },
}

Vue.filter('formatDate', function(value) {
  if(value) {
    return "Le " + moment(String(value)).format('MM/DD/YYYY') + " Ã  " + moment(String(value)).format('hh:mm')
  }
});

</script>

<style>
a {
  text-decoration: none;
}
.btn {
  margin-right: 6px;
}
.fade-enter-active, .fade-leave-active {
  transition: opacity .5s, transform .5s;
}
.fade-enter, .fade-leave-active {
  opacity: 0;
}
s.btn-delete {
  position: absolue;
  right: 0;
}
.div-button-navuser {
  padding-bottom: 10px;
}
.btn-add-content{
  margin-top: 10px;
}
</style>
